(function(){var t,e=[].slice,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){function n(){this.constructor=t}for(var s in e)i.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;window.App={Algorithms:{},Connections:{},Templates:{}},String.prototype._idSafe=function(){return this.replace(/([\u0080-\uffff]|\s+)/g,"_")},String.prototype._idUnique=function(){var t,e,n;for(e=this,n=e,t=0;document.getElementById(n);)n=e+"-"+t++;return""+n},String.prototype._capitalize=function(){return this[0].toUpperCase()+this.slice(1)},String.prototype.contains=function(t){return this.indexOf(t)>=0},Array.prototype.without=function(t){var e;return function(){var n,s,i;for(i=[],n=0,s=this.length;s>n;n++)e=this[n],e!==t&&i.push(e);return i}.call(this)},Array.prototype.remove=function(t){var e;return e=this.indexOf(t),e>=0&&this.splice(e,1),this},Object.defineProperties(Array.prototype,{first:{get:function(){return this[0]},set:function(t){return this[0]=t,this}},second:{get:function(){return this[1]},set:function(t){return this[1]=t,this}},last:{get:function(){return this[this.length-1]},set:function(t){return this[this.length-1]=t,this}}}),App.Templates.navbar={template:'<nav class="navbar navbar-default">\n    <div class="container-fluid">\n        <div class="navbar-header">\n            <a class="navbar-brand" href="#">UMLEditor</a>\n        </div>\n\n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n            <ul class="nav navbar-nav">\n                <li>\n                    <a href="#">\n                        <span class="label label-primary label-lg newClass">\n                            New class &nbsp;\n                            <span class="glyphicon glyphicon-plus"></span>\n                        </span>\n                    </a>\n                </li>\n                <li>\n                    <a href="#">\n                        <span class="label label-primary label-lg newConnection">\n                            Connect classes &nbsp;\n                            <span class="glyphicon glyphicon-link"></span>\n                        </span>\n                    </a>\n                </li>\n                <li>\n                    <a href="#">\n                        <span class="label label-primary label-lg save">\n                            Save &nbsp;\n                            <span class="glyphicon glyphicon-hdd"></span>\n                        </span>\n                    </a>\n                </li>\n                <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">\n                        View &nbsp;\n                        <span class="glyphicon glyphicon-object-align-horizontal"></span>\n                        {{!<span class="caret"></span>}}\n                    </a>\n                    <ul class="dropdown-menu view">\n                        <li class="all"><a href="#">All</a></li>\n                        <li class="model"><a href="#">Models</a></li>\n                        <li class="view"><a href="#">Views</a></li>\n                        <li class="controller"><a href="#">Controllers</a></li>\n                        <li class="model_controller"><a href="#">Models &amp; Controllers</a></li>\n                        <li class="controller_view"><a href="#">Controllers &amp; Views</a></li>\n                    </ul>\n                </li>\n                <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">\n                        Export &nbsp;\n                        <span class="glyphicon glyphicon-export"></span>\n                        {{!<span class="caret"></span>}}\n                    </a>\n                    <ul class="dropdown-menu export">\n                        <li class="json"><a href="#">JSON</a></li>\n                        <li class="cson"><a href="#">CSON</a></li>\n                        <li class="xml"><a href="#">XML</a></li>\n                    </ul>\n                </li>\n                <li class="dropdown">\n                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">\n                        Import &nbsp;\n                        <span class="glyphicon glyphicon-import"></span>\n                        {{!<span class="caret"></span>}}\n                    </a>\n                    <ul class="dropdown-menu import">\n                        <li class="json"><a href="#">JSON</a></li>\n                        <li class="cson"><a href="#">CSON</a></li>\n                        <li class="xml"><a href="#">XML</a></li>\n                    </ul>\n                </li>\n            </ul>\n            <ul class="nav navbar-nav navbar-right">\n                <form class="navbar-form" role="search">\n                    <div class="form-group relative">\n                        <input type="text" class="form-control search" placeholder="Search classes">\n                        <button type="button" class="close" title="Clear search">\n                            <span>&times;</span>\n                        </button>\n                    </div>\n                </form>\n            </ul>\n        </div>\n    </div>\n</nav>',bindEvents:function(t){var e,n,s,i,a,r,o,l,c;return n=t.commandPalette,c=this.find(".search"),e=c.siblings(".close"),c.keyup(function(n){var s,i,a,r,o,l,d,p;if(27===n.which)return e.click(),!0;if(p=c.val(),(null!=p?p.length:void 0)>0?e.fadeIn(100):e.fadeOut(100),(null!=p?p.length:void 0)>2)for(t.svg.select(".background").classed("searching",!0),l=t.classes,i=0,r=l.length;r>i;i++)s=l[i],s.name.contains(p)||s.views["class"].element.classed("searching",!0);else for(t.svg.select(".background").classed("searching",!1),d=t.classes,a=0,o=d.length;o>a;a++)s=d[a],s.views["class"].element.classed("searching",!1);return!0}),e.click(function(){return c.val("").keyup(),!0}),n.registerCommand("search","Search classes",function(){return c.focus(),!0}),s=function(){var e;return e=new App.UMLClass(t,"_"+Date.now(),[],[]),t.addClass(e),t.draw(),!0},this.find(".label.newClass").click(s),n.registerCommand("class.new","New class",s),i=function(){return t.showConnectionModal(),!0},this.find(".label.newConnection").click(i),n.registerCommand("connection.new","Connect classes",i),this.find(".label.save").click(function(){return!0}),this.find(".view li").each(function(e,s){var i,a,r;return i=$(s),r=i.attr("class"),a=function(){return t.setView(r).draw(),!0},i.click(a),n.registerCommand("view."+r,"Set view to '"+r+"'",a),!0}),a=function(){return t.showImportExportModal(t.toJSON(),"json"),!0},r=this.find(".export"),r.find(".json").click(a),n.registerCommand("export.json","Export as JSON",a),o=function(){return t.showImportExportModal("","json"),!0},l=this.find(".import"),l.find(".json").click(o),n.registerCommand("import.json","Import as JSON",o),this},bindKeys:function(t){var e;return e=this,Mousetrap(document.body).bind("u+s",function(){return t.inKeyboardMode?(e.find(".search").focus(),!1):!0}),this}},App.Templates.svg='<div class="svgWrapper">\n<svg class="uml">\n    <rect class="background" width="100%" height="100%"></rect>\n    <g class="zoomer"></g>\n</svg>\n</div>',App.Templates.chooseConnection={template:'<div class="modal fade uml chooseConnection">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h3 class="modal-title">\n                    Choose a connection / dependency type\n                </h3>\n            </div>\n            <div class="modal-body">\n                <div class="general">\n                    <form class="form-horizontal form-group">\n                        <h4>Class level relationships</h4>\n                        <div class="row padded">\n                            <div class="col-xs-8 col-xs-push-2">\n                                <div class="input-group clickable">\n                                    <span class="input-group-addon">\n                                        <input type="radio" name="connectionType" value="generalization" />\n                                    </span>\n                                    <input type="text" class="form-control no-focus" readonly value="Generalization (\'inherit from X\')" />\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row padded">\n                            <div class="col-xs-8 col-xs-push-2">\n                                <div class="input-group clickable">\n                                    <span class="input-group-addon">\n                                        <input type="radio" name="connectionType" value="realization" />\n                                    </span>\n                                    <input type="text" class="form-control no-focus" readonly value="Realization (\'implement X\')" />\n                                </div>\n                            </div>\n                        </div>\n\n                        <h4>Instance level relationships</h4>\n                        <div class="row padded">\n                            <div class="col-xs-8 col-xs-push-2">\n                                <div class="input-group clickable">\n                                    <span class="input-group-addon">\n                                        <input type="radio" name="connectionType" value="association" />\n                                    </span>\n                                    <input type="text" class="form-control no-focus" readonly value="Association (\'has relationship to X\')" />\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row padded">\n                            <div class="col-xs-8 col-xs-push-2">\n                                <div class="input-group clickable">\n                                    <span class="input-group-addon">\n                                        <input type="radio" name="connectionType" value="aggregation" />\n                                    </span>\n                                    <input type="text" class="form-control no-focus" readonly value="Aggregation (\'is part of X\')" />\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row padded">\n                            <div class="col-xs-8 col-xs-push-2">\n                                <div class="input-group clickable">\n                                    <span class="input-group-addon">\n                                        <input type="radio" name="connectionType" value="composition" />\n                                    </span>\n                                    <input type="text" class="form-control no-focus" readonly value="Composition (\'is necessary part of X\')" />\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default cancel" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-primary save">Next (select classes)</button>\n            </div>\n        </div>\n    </div>\n</div>',bindEvents:function(t){var e,n,s;return s=this.find(".save"),e=this.find(".input-group"),e.click(function(){return $(this).find("input[type='radio']").prop("checked",!0),e.filter(".has-error").removeClass("has-error"),s.hasClass("btn-danger")&&s.removeClass("btn-danger"),!0}),n=this.find("[name='connectionType']"),s.click(function(){var i;return i=n.filter(":checked"),i.length>0?t.hideConnectionModal().showClassNamesOnly().dataCollector.reset().setType(i.val()).show():(e.eq(0).addClass("has-error"),s.addClass("btn-danger")),!0}),this}},App.Templates.selectClassesForConnection={template:'<div class="selectClassesForConnection">\n    <div class="alert alert-danger alert-sm">\n        <div class="row padded">\n            <div class="centered bigger">\n                <strong>STATUS</strong>\n            </div>\n        </div>\n        <div class="row padded">\n            <div class="col-xs-4">\n                <strong>type:</strong>\n                <span class="type"></span>\n            </div>\n            <div class="col-xs-4">\n                <strong>source:</strong>\n                <span class="source"></span>\n            </div>\n            <div class="col-xs-4">\n                <strong>target:</strong>\n                <span class="target"></span>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-4 col-xs-push-4 centered">\n                <button class="btn btn-primary save" style="margin-right: 15px;">Save</button>\n                <button class="btn btn-danger cancel">Cancel</button>\n            </div>\n        </div>\n    </div>\n</div>',bindEvents:function(t){var e,n;return n=this.find(".save"),e=this.find(".cancel"),n.click(function(){var e;return e=t.dataCollector.hide().createConnection(),t.addConnection(e).draw(),!0}),e.click(function(){return t.showClassData().dataCollector.hide(),!0}),this}},App.Templates.editUMLClass={template:'<div class="modal fade uml edit">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h3 class="modal-title">\n                    <span>Edit "<span class="className">{{className}}</span>"</span>\n                    <button type="button" class="btn btn-danger deleteClass right hpadded">Delete class</button>\n                    <button type="button" class="btn btn-default renameClass right">Rename class</button>\n                </h3>\n            </div>\n            <div class="modal-body">\n                <div class="general">\n                    <h4>General options</h4>\n                    <form class="form-horizontal form-group">\n                        <div class="row">\n                            <div class="col-xs-4 col-xs-push-2">\n                                <div class="input-group">\n                                    <span class="input-group-addon">\n                                        <input type="checkbox" class="abstractCheckbox"{{isAbstract}} />\n                                    </span>\n                                    <input type="text" class="form-control" readonly value="is abstract?" />\n                                </div>\n                            </div>\n                            <div class="col-xs-4 col-xs-push-2">\n                                <div class="input-group">\n                                    <span class="input-group-addon">\n                                        <input type="checkbox" class="interfaceCheckbox"{{isInterface}} />\n                                    </span>\n                                    <input type="text" class="form-control" readonly value="is interface?" />\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="attributes">\n                    <h4>Attributes</h4>\n                    <form class="form-horizontal"></form>\n                    <div class="row">\n                        <div class="col-xs-10 col-xs-push-2">\n                            <button type="button" class="btn btn-primary add">Add attribute</button>\n                        </div>\n                    </div>\n                </div>\n                <hr />\n                <div class="methods">\n                    <h4>Methods</h4>\n                    <form class="form-horizontal"></form>\n                    <div class="row">\n                        <div class="col-xs-10 col-xs-push-2">\n                            <button type="button" class="btn btn-primary add">Add method</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-danger cancel" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-default reset">Reset</button>\n                <button type="button" class="btn btn-primary btn-lg save">Save changes</button>\n            </div>\n        </div>\n    </div>\n</div>',bindEvents:function(t){var e;return e=this,this.find("button.deleteClass").click(function(){return confirm("Are you really sure you want to delete the class '"+t.model.name+"' and all of its incoming and outgoing dependencies?")&&(t.hide(),e.on("hidden.bs.modal",function(){return t.model.editor.removeClass(t.model),!0})),!0}),this.find("button.renameClass").click(function(){var e;return null!=(e=prompt("Enter the new name of the class!"))&&(t.model.name=e,t.draw()),!0}),this.find("button.cancel").click(function(){return t.draw(),!0}),this.find("button.reset").click(function(){return t.draw(),!0}),this.find("button.save").click(function(){var e;return e=t._getInput(),t.model.update(e.attributes,e.methods,e.generalOptions),t.hide(),!0}),this.find(".attributes .add").click(function(){return e.find(".attributes form").append(t._createFormRow({name:"new attribute",type:"new type",visibility:"public"},!0)),!0}),this.find(".methods .add").click(function(){return e.find(".methods form").append(t._createFormRow({name:"new method",type:"new type",visibility:"public"},!1)),!0}),this}},App.Templates.editUMLClassParamRow={template:'<div class="row padded parameter">\n    <div class="col-xs-3">\n        <input type="text" class="form-control name" placeholder="parameter name" value="{{name}}" />\n    </div>\n    <div class="col-xs-3">\n        <input type="text" class="form-control type" placeholder="parameter type" value="{{type}}" />\n    </div>\n    <div class="col-xs-2">\n        <input type="text" class="form-control default" placeholder="default" value="{{default}}" data-current-value="{{default}}" />\n    </div>\n    <div class="col-xs-3">\n        <div class="input-group">\n            <span class="input-group-addon">\n                <input type="checkbox" class="nullCheckbox" />\n            </span>\n            <input type="text" class="form-control" readonly value="NULL" />\n        </div>\n    </div>\n    <div class="col-xs-1">\n        <button type="button" class="close parameter hidden" title="Remove parameter">\n            <span>&times;</span>\n        </button>\n    </div>\n</div>'},App.Templates.editUMLClassParamList={template:'<div class="row">\n    <div class="col-xs-12">\n        <label class="control-label">Parameters</label>\n    </div>\n</div>\n{{#parameters}}\n    {{{.}}}\n{{/parameters}}\n<div class="row">\n    <div class="col-xs-12">\n        <button type="button" class="btn btn-primary btn-sm add parameter">Add parameter</button>\n    </div>\n</div>'},App.Templates.editUMLClassFormRow={template:'<div class="form-group">\n  <div class="row padded">\n      <label for="{{id}}" class="col-xs-2 control-label">{{name}}</label>\n      <div class="col-xs-8">\n          <input type="text" id="{{id}}" class="form-control name" placeholder="Name" value="{{name}}" />\n      </div>\n      <div class="col-xs-1">\n          <button type="button" class="close property hidden" title="Remove property">\n              <span>&times;</span>\n          </button>\n      </div>\n  </div>\n  <div class="row padded">\n      <div class="col-xs-8 col-xs-push-2">\n          <input type="text" class="form-control type" placeholder="Type" value="{{type}}" />\n      </div>\n  </div>\n  <div class="row padded">\n      <div class="col-xs-8 col-xs-push-2">\n          {{#select}}\n              <select class="form-control visibility">\n                  <option value="public" {{public}}>+ public</option>\n                  <option value="private" {{private}}>- private</option>\n                  <option value="protected" {{protected}}># protected</option>\n                  <option value="package" {{package}}>~ package</option>\n              </select>\n          {{/select}}\n      </div>\n  </div>\n  {{#paramValue}}\n      <div class="row padded">\n          <div class="col-xs-4 col-xs-push-2">\n              <input type="text" class="form-control default" placeholder="Default value (optional)" value="{{default}}" data-current-value="{{default}}" />\n          </div>\n          <div class="col-xs-4 col-xs-push-2">\n              <div class="input-group">\n                  <span class="input-group-addon">\n                      <input type="checkbox" class="nullCheckbox" {{checked}} />\n                  </span>\n                  <input type="text" class="form-control" readonly value="NULL" />\n              </div>\n          </div>\n      </div>\n  {{/paramValue}}\n  {{#paramList}}\n      <div class="row padded">\n          <div class="col-xs-8 col-xs-push-2">\n              {{! triple mustache = unescaped HTML}}\n              {{{list}}}\n          </div>\n      </div>\n  {{/paramList}}\n</div>',bindEvents:function(t,e){var n;return n=this,this.find("#"+t).blur(function(){var t;return t=$(this),t.parent().siblings("label").text(t.val()),!0}),this.find(".close.hidden.property").click(function(){return confirm("Remove '"+e.name+"'?")&&n.remove(),!0}),this.find(".nullCheckbox").change(function(){var t,e;return t=$(this),e=t.closest(".row").find(".default"),t.is(":checked")?(e.attr("data-current-value",e.val()),e.val("")):e.val(e.attr("data-current-value")),!0}),this.find(".add.parameter").click(function(){return $(this).closest(".row").before(App.Templates.getHTML("editUMLClassParamRow",{name:"",type:"","default":""})),!0}),this.find(".close.hidden.parameter").click(function(){return $(this).closest(".row").remove(),!0}),this}},App.Templates.editUMLClass={template:'<div class="modal fade uml edit">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h3 class="modal-title">\n                    <span>Edit "<span class="className">{{className}}</span>"</span>\n                    <button type="button" class="btn btn-danger deleteClass right hpadded">Delete class</button>\n                    <button type="button" class="btn btn-default renameClass right">Rename class</button>\n                </h3>\n            </div>\n            <div class="modal-body">\n                <div class="general">\n                    <h4>General options</h4>\n                    <form class="form-horizontal form-group">\n                        <div class="row">\n                            <div class="col-xs-4 col-xs-push-2">\n                                <div class="input-group">\n                                    <span class="input-group-addon">\n                                        <input type="checkbox" class="abstractCheckbox"{{isAbstract}} />\n                                    </span>\n                                    <input type="text" class="form-control" readonly value="is abstract?" />\n                                </div>\n                            </div>\n                            <div class="col-xs-4 col-xs-push-2">\n                                <div class="input-group">\n                                    <span class="input-group-addon">\n                                        <input type="checkbox" class="interfaceCheckbox"{{isInterface}} />\n                                    </span>\n                                    <input type="text" class="form-control" readonly value="is interface?" />\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="attributes">\n                    <h4>Attributes</h4>\n                    <form class="form-horizontal"></form>\n                    <div class="row">\n                        <div class="col-xs-10 col-xs-push-2">\n                            <button type="button" class="btn btn-primary add">Add attribute</button>\n                        </div>\n                    </div>\n                </div>\n                <hr />\n                <div class="methods">\n                    <h4>Methods</h4>\n                    <form class="form-horizontal"></form>\n                    <div class="row">\n                        <div class="col-xs-10 col-xs-push-2">\n                            <button type="button" class="btn btn-primary add">Add method</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-danger cancel" data-dismiss="modal">Cancel</button>\n                <button type="button" class="btn btn-default reset">Reset</button>\n                <button type="button" class="btn btn-primary btn-lg save">Save changes</button>\n            </div>\n        </div>\n    </div>\n</div>',bindEvents:function(t){var e;return e=this,this.find("button.deleteClass").click(function(){return confirm("Are you really sure you want to delete the class '"+t.model.name+"' and all of its incoming and outgoing dependencies?")&&(t.hide(),e.on("hidden.bs.modal",function(){return t.model.editor.removeClass(t.model),!0})),!0}),this.find("button.renameClass").click(function(){var e;return null!=(e=prompt("Enter the new name of the class!"))&&(t.model.name=e,t.draw()),!0}),this.find("button.cancel").click(function(){return t.draw(),!0}),this.find("button.reset").click(function(){return t.draw(),!0}),this.find("button.save").click(function(){var e;return e=t._getInput(),t.model.update(e.attributes,e.methods,e.generalOptions),t.hide(),!0}),this.find(".attributes .add").click(function(){return e.find(".attributes form").append(t._createFormRow({name:"new attribute",type:"new type",visibility:"public"},!0)),!0}),this.find(".methods .add").click(function(){return e.find(".methods form").append(t._createFormRow({name:"new method",type:"new type",visibility:"public"},!1)),!0}),this}},App.Templates.editUMLClassParamRow={template:'<div class="row padded parameter">\n    <div class="col-xs-3">\n        <input type="text" class="form-control name" placeholder="parameter name" value="{{name}}" />\n    </div>\n    <div class="col-xs-3">\n        <input type="text" class="form-control type" placeholder="parameter type" value="{{type}}" />\n    </div>\n    <div class="col-xs-2">\n        <input type="text" class="form-control default" placeholder="default" value="{{default}}" data-current-value="{{default}}" />\n    </div>\n    <div class="col-xs-3">\n        <div class="input-group">\n            <span class="input-group-addon">\n                <input type="checkbox" class="nullCheckbox" />\n            </span>\n            <input type="text" class="form-control" readonly value="NULL" />\n        </div>\n    </div>\n    <div class="col-xs-1">\n        <button type="button" class="close parameter hidden" title="Remove parameter">\n            <span>&times;</span>\n        </button>\n    </div>\n</div>'},App.Templates.editUMLClassParamList={template:'<div class="row">\n    <div class="col-xs-12">\n        <label class="control-label">Parameters</label>\n    </div>\n</div>\n{{#parameters}}\n    {{{.}}}\n{{/parameters}}\n<div class="row">\n    <div class="col-xs-12">\n        <button type="button" class="btn btn-primary btn-sm add parameter">Add parameter</button>\n    </div>\n</div>'},App.Templates.importExportModal={template:'<div class="modal fade uml edit">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal">\n                    <span>&times;</span>\n                </button>\n                <h3 class="modal-title">\n                    Import / Export\n                </h3>\n            </div>\n            <div class="modal-body">\n                <form>\n                    <div class="row padded">\n                        <div class="col-xs-4">\n                            <div class="input-group">\n                                <span class="input-group-addon">\n                                    <input type="radio" name="format" value="json" tabindex="50" />\n                                </span>\n                                <input type="text" class="form-control" readonly value="JSON" tabindex="-1" />\n                            </div>\n                        </div>\n                        <div class="col-xs-4">\n                            <div class="input-group">\n                                <span class="input-group-addon">\n                                    <input type="radio" name="format" value="cson" tabindex="51" />\n                                </span>\n                                <input type="text" class="form-control" readonly value="CSON" tabindex="-1" />\n                            </div>\n                        </div>\n                        <div class="col-xs-4">\n                            <div class="input-group">\n                                <span class="input-group-addon">\n                                    <input type="radio" name="format" value="xml" tabindex="52" />\n                                </span>\n                                <input type="text" class="form-control" readonly value="XML" tabindex="-1" />\n                            </div>\n                        </div>\n                    </div>\n                    <textarea class="form-control" style="resize: vertical; height: 375px;"></textarea>\n                    <input type="text" class="invisible" />\n                </form>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n                <button type="button" class="btn btn-primary import">Import</button>\n            </div>\n        </div>\n    </div>\n</div>',bindEvents:function(t){var e,n,s;return n=this,e=this.find("[name='format']"),s=this.find("textarea"),this.on("show.bs.modal",function(){return e.filter("[value='"+n.data("format")+"']").prop("checked",!0),s.val(n.data("value")),!0}),this.on("shown.bs.modal",function(){return n.find(".invisible").focus(),!0}),this.on("hidden.bs.modal",function(){return s.val(""),!0}),this.find(".btn.import").click(function(){return t.fromJSON(s.val()).draw(),n.modal("hide"),!0}),this},bindKeys:function(t){var e,n;return n=this,e=this.get(0),Mousetrap(e).bind("esc",function(t,e){return n.modal("hide"),!1}).bind("u+w",function(e,s){return t.inKeyboardMode?(n.modal("hide"),!1):!0}),this}},App.Templates.commandPalette={template:'<span class="commandPalette label label-xlg label-info">\n    <div class="row">\n        <div class="col-xs-1">\n            <span class="glyphicon glyphicon-console"></span>\n        </div>\n        <div class="col-xs-11">\n            <input class="search form-control" type="text" placeholder="Search commands" />\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12 results">\n        </div>\n    </div>\n</span>\n<div class="commandPalette overlay" />',
bindEvents:function(t){var e,n;return e='<div class="row result" data-idx="{{index}}">\n    <div class="col-xs-11 col-xs-push-1">\n        <div class="row">\n            <div class="col-xs-12 name">\n                {{name}}\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-xs-12 path">\n                {{path}}\n            </div>\n        </div>\n\n    </div>\n</div>',n=this.find(".results"),this.find(".search").keyup(function(){var s,i,a,r,o;return r=$(this).val(),r!==t.lastQuery&&(t.lastQuery=r,o=function(){var e,n,s,o;for(s=t.find(r),o=[],i=e=0,n=s.length;n>e;i=++e)a=s[i],o.push({path:a.path,name:a.name,index:i});return o}(),r.length>=2?(n.empty().append(function(){var t,n,i;for(i=[],t=0,n=o.length;n>t;t++)s=o[t],i.push(Mustache.to_html(e,s));return i}().join("")).find(".result").click(function(){return t.currentResultIdx=parseInt($(this).attr("data-idx"),10),t.execCurrent(!0),!1}),n.find(".result").mouseenter(function(){var e;return e=$(this),e.addClass("active").siblings(".active").removeClass("active"),t.currentResultIdx=e.attr("data-idx"),!0})):n.empty()),!0}),this.filter(".overlay").click(function(){return t.hide(),!0}),this},bindKeys:function(t){return Mousetrap(this.get(0)).bind(["up","down"],function(e,n){return"up"===n?t.prevResult():t.nextResult(),!1}).bind("enter",function(e,n){return t.execCurrent(!0),!1}).bind("esc",function(e,n){return t.hide(),!1}),this}},App.Algorithms.levenshteinDistance=function(t,e){var n,s,i,a,r,o,l,c,d,p,u,h,m;if(n=t.length,s=e.length,0===n)return s;if(0===s)return n;for(c=[],i=r=0,p=s;p>=0?p>=r:r>=p;i=p>=0?++r:--r)c[i]=[i];for(a=o=0,u=n;u>=0?u>=o:o>=u;a=u>=0?++o:--o)c[0][a]=a;for(i=l=1,h=s;h>=1?h>=l:l>=h;i=h>=1?++l:--l)for(a=d=1,m=n;m>=1?m>=d:d>=m;a=m>=1?++d:--d)e.charAt(i-1)===t.charAt(a-1)?c[i][a]=c[i-1][a-1]:c[i][a]=Math.min(c[i-1][a-1]+1,Math.min(c[i][a-1]+1,c[i-1][a]+1));return c[s][n]},App.Algorithms.levDist=App.Algorithms.levenshteinDistance,t=function(){var t,n,s,i,a,r,o,l;return i=arguments[0],a=arguments[1],n=arguments[2],t=4<=arguments.length?e.call(arguments,3):[],null!=(l=App.Templates[a])?(null!=l.template?(s=Mustache.to_html(l.template,n),s=i(s),null!=(r=l.bindEvents)&&r.apply(s,t),null!=(o=l.bindKeys)&&o.apply(s,t)):(s=Mustache.to_html(l,n),s=i(s)),s):null},App.Templates.get=function(){var n,s,i;return i=arguments[0],s=arguments[1],n=3<=arguments.length?e.call(arguments,2):[],t.apply(null,[function(t){return $(t)},i,s].concat(e.call(n)))},App.Templates.getHTML=function(){var n,s,i;return i=arguments[0],s=arguments[1],n=3<=arguments.length?e.call(arguments,2):[],t.apply(null,[function(t){return t},i,s].concat(e.call(n)))},App.Templates.getD3=function(){var t,n,s,i,a,r;return i=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],null!=(r=App.Templates[i])?(null!=r.template?(s=$(Mustache.to_html(r.template,n)),s=d3.select(s.get(0)),null!=(a=r.bindEvents)&&a.apply(s,t)):(s=Mustache.to_html(r,n),s=d3.select(s.get(0))),s):null},App.UMLConnectionDataCollector=function(){function t(t){this.editor=t,this.reset(),this.div=App.Templates.get("selectClassesForConnection",null,t),$(document.body).append(this.div)}return t.prototype.createConnection=function(){var t;return new(t=App.Connections[this.data.type._capitalize()])(this.data.source,this.data.target)},t.prototype.reset=function(){return this.data={source:null,target:null,type:null},this},t.prototype.setType=function(t){return this.data.type=t,this._update(),this},t.prototype.toggleData=function(t){var e;if(this.data.source===t)this.data.source=null,e=!1;else if(this.data.target===t)this.data.target=null,e=!1;else if(null==this.data.source)this.data.source=t,e=!0;else{if(null!=this.data.target)throw new Error("Invalid data given or existing data is invalid!");this.data.target=t,e=!0}return this._update(),e},t.prototype._update=function(){return this.div.find(".type").text(this.data.type||"?"),this.div.find(".source").text(this.data.source||"?"),this.div.find(".target").text(this.data.target||"?"),this},t.prototype.show=function(){return this.div.fadeIn(100),this},t.prototype.hide=function(){return this.div.fadeOut(100),this},t}(),App.CommandPalette=function(){function t(t){this.editor=t,this.commands={},this.element=App.Templates.get("commandPalette",null,this),this.lastQuery="",this.visible=!1,this.currentResultIdx=-1,this.resultSet=[],$(document.body).append(this.element)}return t.prototype.registerCommand=function(t,e,n){return this.commands[t]={name:e,callback:n},this},t.prototype.unregisterCommand=function(t){return delete this.commands[t],this},t.prototype.exec=function(t,e){var n;return null==e&&(e=!0),e&&this.hide(),null!=(n=this.commands[t])&&"function"==typeof n.callback?n.callback():void 0},t.prototype.execCurrent=function(t){return this.exec(this.resultSet[this.currentResultIdx].path,t)},t.prototype.find=function(t,e){var n,s,i,a,r,o,l,c,d,p,u;null==e&&(e=7),this.currentResultIdx=-1,i=t.toLowerCase(),u=[],a=App.Algorithms.levDist,p=this.commands;for(c in p){if(l=p[c],d=a(t,c),o=a(t,l.name),o>d?(s=d,r="path"):d>o?(s=o,r="name"):(s=d,r="both"),c.toLowerCase().indexOf(i)>=0)n=!0,r="path";else if(l.name.toLowerCase().indexOf(i)>=0)n=!0,r="name";else{if(s>=.8*Math.min(c.length,l.name.length))continue;n=!1}u.push({path:c,name:l.name,callback:l.callback,dist:s,matchBy:r,directHit:n})}return u.sort(function(t,e){return t.directHit===!0?e.directHit===!0?t.dist-e.dist:-1:e.directHit===!0?1:t.dist-e.dist}),this.resultSet=u,u.slice(0,e)},t.prototype.reset=function(){return this.lastQuery="",this.visible=!1,this.currentResultIdx=-1,this.resultSet=[],this.element.find(".results").empty(),this.element.find(".search").val(""),this},t.prototype.show=function(){return this.editor.navbar.addClass("blurred"),this.editor.svg.classed("blurred",!0),this.element.fadeIn(200,function(t){return function(){return t.visible=!0,t.element.find(".search").focus(),!0}}(this)),this},t.prototype.hide=function(){return this.editor.navbar.removeClass("blurred"),this.editor.svg.classed("blurred",!1),this.element.fadeOut(200,function(t){return function(){return t.visible=!1,t.reset(),!0}}(this)),this},t.prototype.toggle=function(){return this.visible?this.hide():this.show()},t.prototype.nextResult=function(){return this.currentResultIdx<this.resultSet.length-1&&(this.currentResultIdx>=0?this.element.find(".result").eq(this.currentResultIdx).removeClass("active").next(".result").addClass("active"):this.element.find(".result").eq(0).addClass("active"),this.currentResultIdx++),this},t.prototype.prevResult=function(){return this.currentResultIdx>0&&(this.element.find(".result").eq(this.currentResultIdx).removeClass("active").prev(".result").addClass("active"),this.currentResultIdx--),this},t}(),App.UMLEditor=function(){function t(){var t;t=this,this.graph=new dagreD3.graphlib.Graph({multigraph:!0}),this.dataCollector=new App.UMLConnectionDataCollector(this),this.commandPalette=new App.CommandPalette(this),this.view="all",this.svg=null,this.navbar=App.Templates.get("navbar",null,this),this.connectionModal=App.Templates.get("chooseConnection",null,this),this.importExportModal=App.Templates.get("importExportModal",null,this),$(document.body).append(this.navbar).append(this.connectionModal).append(this.chooseStatus),this.models=[],this.views=[],this.controllers=[],Object.defineProperty(this,"classes",{get:function(){return this._mapTypeToList(this.view)},set:function(){return this}}),Mousetrap(document.body).bind("mod+shift+p",function(){return t.commandPalette.toggle(),!1})}return t.prototype._mapTypeToList=function(t){return{all:this.models.concat(this.views).concat(this.controllers),model:this.models,view:this.views,controller:this.controllers,model_controller:this.models.concat(this.controllers),controller_view:this.controllers.concat(this.views)}[t]},t.prototype.setView=function(t){return null!=this._mapTypeToList(t)&&(this.view=t),this},t.prototype.resetSvg=function(){var t;return t=App.Templates.get("svg"),null!=this.svg?$(this.svg.node()).replaceWith(t):$(document.body).append(t),this.svg=d3.select(t.find("svg.uml").get(0)),this},t.prototype.addClass=function(t){var e,s;if(s=t.name,!(n.call(function(){var t,n,s,i;for(s=this.classes,i=[],t=0,n=s.length;n>t;t++)e=s[t],i.push(e.name);return i}.call(this),s)<0))throw new Error("Class with name '"+t.name+"' already exists!");return this._mapTypeToList(t.type).push(t),this},t.prototype.removeClass=function(t){return t["delete"](),this._mapTypeToList(t.type).remove(t),this},t.prototype.addConnection=function(t){var e;return e=this.getClass(t.source),e.addConnection(t),this},t.prototype.removeConnection=function(){return this},t.prototype.getClass=function(t){var e,n,s,i;for(i=this.classes,n=0,s=i.length;s>n;n++)if(e=i[n],e.name===t)return e;return null},t.prototype.showConnectionModal=function(){return this.connectionModal.modal("show"),this},t.prototype.hideConnectionModal=function(){return this.connectionModal.modal("hide"),this},t.prototype.showImportExportModal=function(t,e){return this.importExportModal.data("value",t),this.importExportModal.data("format",e),this.importExportModal.modal("show"),this},t.prototype.hideImportExportModal=function(){return this.importExportModal.modal("hide"),this},t.prototype.showClassNamesOnly=function(){var t,e,n,s;for(s=this.classes,e=0,n=s.length;n>e;e++)t=s[e],t.views["class"].showOverlay();return this},t.prototype.showClassData=function(){var t,e,n,s;for(s=this.classes,e=0,n=s.length;n>e;e++)t=s[e],t.views["class"].hideOverlay();return this},t.prototype.draw=function(){var t,e,n,s,i,a,r,o,l,c,d,p,u,h,m,v,f,y,b,g,x,w,C,A,k,_,M;if(k=this.classes,this.resetSvg(),this.graph=new dagreD3.graphlib.Graph({multigraph:!0}).setGraph({}),0===k.length)return this;for(g=this,o=0,c=k.length;c>o;o++)e=k[o],null!=(v=e.views["class"].element)&&v.remove(),e.views["class"].draw(),this.graph.setNode(e.name,{shape:"umlClass",label:"",className:e.name});for(l=0,d=k.length;d>l;l++)for(e=k[l],f=e.outConnections,h=0,p=f.length;p>h;h++)n=f[h],x=n.source,C=n.target,A=n.type,null!=this.getClass(C)&&this.graph.setEdge(x,C,{arrowhead:A},A+"_from_"+x+"_to_"+C);for(w=this.svg,r=w.select(".zoomer"),M=d3.behavior.zoom().on("zoom",function(){return r.attr("transform","translate("+d3.event.translate+") scale("+d3.event.scale+")"),!0}),w.call(M),this.graph.graph().rankdir="BT",b=new dagreD3.render,b.shapes().umlClass=function(t,n,s){var i,a,r,o;return e=g.getClass(s.className),i=e.views["class"].element,n=i.node().getBBox(),o=n.width,a=n.height,r=[{x:0,y:0},{x:o,y:0},{x:o,y:-a},{x:0,y:-a}],i.attr("transform","translate("+.5*-o+", "+.5*-a+")"),s.intersect=function(t){return dagreD3.intersect.polygon(s,r,t)},t.append(function(){return i.node()}),i},y=Object.keys(App.Connections).without("UMLConnection"),m=0,u=y.length;u>m;m++)s=y[m],b.arrows()[s]=App.Connections[s].getArrowhead();return b(r,this.graph),t=w.node().getBBox(),_=t.width,i=t.height,a=1,M.translate([(_-this.graph.graph().width*a)/2,20]).scale(a).event(w),this},t.prototype.serialize=function(){var t;return function(){var e,n,s,i;for(s=this.classes,i=[],e=0,n=s.length;n>e;e++)t=s[e],i.push(t.serialize());return i}.call(this)},t.prototype.deserialize=function(t){var e;return this.classes=function(){var n,s,i;for(i=[],n=0,s=t.length;s>n;n++)e=t[n],i.push(App.UMLClass.fromJSON(this,e));return i}.call(this),this},t.prototype.toJSON=function(){return JSON.stringify(this.serialize())},t.prototype.fromJSON=function(t){return this.deserialize(JSON.parse(t)),this},t}(),App.AbstractView=function(){function t(t){this.model=t}return t.appendDataToSVG=function(t,e){var n,s,i,a,r,o,l;i=t.append(e.tag);for(n in e)l=e[n],"tag"!==n&&"children"!==n&&("class"===n&&(n="classed"),"classed"!==n?("function"==typeof i[n]?i[n](l):void 0)||i.attr(n,l):i.classed(l,!0));if(null!=e.children)for(o=e.children,a=0,r=o.length;r>a;a++)s=o[a],this.appendDataToSVG(i,s);return t},t.prototype.draw=function(){return this},t.prototype.redraw=function(t){return this},t}(),App.UMLClass=function(){function t(t,e,n,s,i){var a,r,o,l,c,d;for(r=0,l=n.length;l>r;r++)a=n[r],a.visibility||(a.visibility="public");for(o=0,c=s.length;c>o;o++)d=s[o],d.visibility||(d.visibility="public"),d.parameters||(d.parameters=[]);this.editor=t,this.name=e,this.type=null,this.attributes=n,this.methods=s,this.isAbstract=i.isAbstract||!1,this.isInterface=i.isInterface||!1,this.outConnections=i.outConnections||[],this.views={"class":new App.UMLClassView(this),edit:new App.UMLClassEditView(this)},Object.defineProperty(this.views,"all",{enumerable:!1,writable:!1,value:["class","edit"]})}return t.fromJSON=function(t,e){var n;return new this(t,e.name,e.attributes,e.methods,{isAbstract:e.isAbstract,isInterface:e.isInterface,outConnections:function(){var t,s,i,a;for(i=e.outConnections,a=[],t=0,s=i.length;s>t;t++)n=i[t],a.push(App.Connections.UMLConnection.fromJSON(n));return a}()})},t.prototype.checkConnection=function(t){var e,n,s,i,a,r,o,l,c;for(n=t.getId(),o=this.outConnections,s=0,a=o.length;a>s;s++)if(e=o[s],e.getId()===n)throw new Error("Connection of that type already exists for class '"+this.name+"'");if(c=t.type,"generalization"===c||"realization"===c)for(l=this.editor.getClass(t.target).outConnections,i=0,r=l.length;r>i;i++)if(e=l[i],c=e.type,("generalization"===c||"realization"===c)&&e.target===this.name)throw new Error("Cyclic generalization or realization detected!");return this},t.prototype.addConnection=function(t){var e,n;try{this.checkConnection(t),this.outConnections.push(t)}catch(n){e=n}return this},t.prototype.drawAll=function(){var t,e,n;e=this.views;for(t in e)n=e[t],n.draw();return this},t.prototype.update=function(t,e,n,s){var i,a,r;for(null==s&&(s=this.views.all),null!=t&&(this.attributes=t),null!=e&&(this.methods=e),this.isAbstract=n.isAbstract,this.isInterface=n.isInterface,i=0,a=s.length;a>i;i++)r=s[i],this.views[r].redraw();return this},t.prototype["delete"]=function(){var t,e,n;e=this.views;for(t in e)n=e[t],n["delete"]();return null},t.prototype.enterEditMode=function(){return this.views.edit.show(),!0},t.prototype.exitEditMode=function(){return this.views.edit.hide(),!0},t.prototype.serialize=function(){var t;return{name:this.name,attributes:this.attributes,methods:this.methods,isAbstract:this.isAbstract,isInterface:this.isInterface,outConnections:function(){var e,n,s,i;for(s=this.outConnections,i=[],e=0,n=s.length;n>e;e++)t=s[e],i.push(t.serialize());return i}.call(this)}},t.prototype.deserialize=function(t){return this.name=t.name,this.attributes=t.attributes,this.methods=t.methods,this.isAbstract=t.isAbstract,this.isInterface=t.isInterface,this.outConnections=t.outConnections,this},t}(),App.UMLClassView=function(t){function e(t){e.__super__.constructor.call(this,t),this.element=null,this.id=this._getId(),this.settings={showVisibility:!0,showTypes:!0}}var n;return s(e,t),n=null,e.prototype["delete"]=function(){return this.element.remove(),null},e.prototype._calculateWidth=function(t,e,s,i){var a,r,o,l,c,d,p,u,h;for(null==e&&(e=""),null==s&&(s=""),null==i&&(i="text"),u={position:"absolute",visibility:"hidden"},null==n&&(n=$("<div id='textWidthDummy' />"),$(document.body).append(n)),n.css(u),null!=i&&n.addClass(i),d=0,h=0,n.text(t),(h=n.width())>d&&(d=h),r=0,l=e.length;l>r;r++)a=e[r],n.text(a),(h=n.width())>d&&(d=h);for(o=0,c=s.length;c>o;o++)p=s[o],n.text(p),(h=n.width())>d&&(d=h);return d+10},e.prototype.adjustSize=function(){return this},e.prototype._getId=function(){return this.model.name._idSafe()._idUnique()},e.prototype._createElements=function(t){var e;return e={tag:"g","class":"uml class",id:this.id,children:[{tag:"g","class":"name part",children:[{tag:"rect","class":"rect"},{tag:"text","class":"text",y:"1em",children:[{tag:"tspan","class":"keywords"},{tag:"tspan","font-weight":"bold","class":"name",dy:"1.2em"},{tag:"tspan","class":"properties",dy:"1.2em"}]},{tag:"text","class":"edit","font-family":"'Glyphicons Halflings'","font-size":"13px",html:"âœ",y:16}]},{tag:"g","class":"attributes part",children:[{tag:"rect","class":"rect"},{tag:"text","class":"text",y:"1em"}]},{tag:"g","class":"methods part",children:[{tag:"rect","class":"rect"},{tag:"text","class":"text",y:"1em"}]},{tag:"g","class":"overlayWrapper",children:[{tag:"rect","class":"overlay"},{tag:"text","class":"text",y:"1em"}]}]},t=App.AbstractView.appendDataToSVG(t,e),t.select("#"+this.id)},e.prototype._bindEvents=function(){var t,e,n;return n=this,t=this.element,this.element.select(".edit").on("click",function(){return n.model.enterEditMode(),!0}),e=this.element.select(".overlayWrapper"),e.on("click",function(){var t;return t=n.model.editor.dataCollector.toggleData(e.select(".text").text()),e.classed("selected",t),!0}),this},e.prototype._paramsToString=function(t){var e,n,s,i,a;if(!t||0===t.length)return"";for(i=[],e=0,n=t.length;n>e;e++)s=t[e],a=null!=s.type?": "+s.type:"",i.push(""+s.name+a);return i.join(", ")},e.prototype._attributeToString=function(t){var e,n;return n=t.visibility||"public",e=null!=t.type?": "+t.type:"",(this._visibilityToString(n)+" "+t.name+e).trim()},e.prototype._methodToString=function(t){var e;return null!=t.name?(e=null!=t.type?": "+t.type:"",(this._visibilityToString(t.visibility)+" "+t.name+"("+this._paramsToString(t.parameters)+")"+e).trim()):")"===t.last?"+ "+t:"+ "+t+"()"},e.prototype._visibilityToString=function(t){var e;return e={"public":"+","protected":"#","package":"~","private":"-"},e[t.toLowerCase()]},e.prototype.showOverlay=function(){return this.element.select(".overlayWrapper").style("display","block"),this},e.prototype.hideOverlay=function(){return this.element.select(".overlayWrapper").style("display","none"),this},e.prototype.draw=function(t,e){var n,s,i,a,r,o,l,c,d,p,u,h,m;return this.element=this._createElements(this.model.editor.svg),p=function(){var t,e,s,i;for(s=this.model.attributes,i=[],t=0,e=s.length;e>t;t++)n=s[t],i.push(this._attributeToString(n));return i}.call(this),u=function(){var t,e,n,s;for(n=this.model.methods,s=[],t=0,e=n.length;e>t;t++)l=n[t],s.push(this._methodToString(l));return s}.call(this),c=this.model.name,m=this._calculateWidth(c,p,u),h=0,r=18,o=3,d={left:4,right:0},m+=d.left+d.right,e=0,a=this.model.isInterface,i=this.model.isAbstract,s=3*r,h+=s,this.element.classed(this.model.type,!0),this.element.selectAll(".part .rect").attr("width",m),this.element.select(".name .rect").attr("height",s),a&&this.element.select(".name .text .keywords").text("<<interface>>").attr("x",(m-this._calculateWidth("<<interface>>"))/2),this.element.select(".name .text .name").text(c).attr("x",(m-this._calculateWidth(c))/2),i&&this.element.select(".name .text .properties").text("{abstract}").attr("x",(m-this._calculateWidth("{abstract}"))/2),this.element.select(".name .edit").attr("x",m-19),e+=s,s=this.model.attributes.length*(r+o),h+=s,this.element.select(".attributes").attr("transform","translate(0, "+e+")"),this.element.select(".attributes .rect").attr("height",s),this.element.select(".attributes .text").selectAll("tspan").data(function(){var t,e,s;for(s=[],t=0,e=p.length;e>t;t++)n=p[t],s.push({text:n});return s}()).enter().append("tspan").text(function(t){return t.text}).attr("x",d.left).attr("dy",function(t,e){return e>0?r+o:0}),e+=s,s=this.model.methods.length*(r+o),h+=s,this.element.select(".methods").attr("transform","translate(0, "+e+")"),this.element.select(".methods .rect").attr("height",s),this.element.select(".methods .text").selectAll("tspan").data(function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)l=u[t],n.push({text:l});return n}()).enter().append("tspan").text(function(t){return t.text}).attr("x",d.left).attr("dy",function(t,e){return e>0?r+o:0}),this.element.select(".overlay").attr("width",m).attr("height",h),this.element.select(".overlayWrapper .text").text(c).attr("x",(m-this._calculateWidth(c))/2).attr("y",h/2),this._bindEvents(),this},e}(App.AbstractView),App.UMLClassEditView=function(t){function e(t){e.__super__.constructor.call(this,t),this.div=App.Templates.get("editUMLClass",{className:this.model.name,isAbstract:this.model.isAbstract,isInterface:this.model.isInterface},this),this.draw(),$(document.body).append(this.div),this.hide()}return s(e,t),e.prototype["delete"]=function(){return this.div.remove(),null},e.prototype._getInput=function(){var t,e,n;return e={},t=[],n=[],e.isAbstract=this.div.find(".general .abstractCheckbox").prop("checked"),e.isInterface=this.div.find(".general .interfaceCheckbox").prop("checked"),this.div.find(".attributes .form-group").each(function(e,n){var s;return s=$(this),t.push({name:s.find(".name").val(),type:s.find(".type").val(),visibility:s.find(".visibility").val(),"default":s.find(".nullCheckbox").prop("checked")?null:s.find(".default").val()}),!0}),this.div.find(".methods .form-group").each(function(){var t,e;return t=$(this),e=[],t.find(".row.parameter").each(function(){var t;return t=$(this),e.push({name:t.find(".name").val(),type:t.find(".type").val(),"default":t.find(".nullCheckbox").prop("checked")?null:t.find(".default").val()}),!0}),n.push({name:t.find(".name").val(),type:t.find(".type").val(),visibility:t.find(".visibility").val(),parameters:e}),!0}),{generalOptions:e,attributes:t,methods:n}},e.prototype._createParamRow=function(t){return App.Templates.getHTML("editUMLClassParamRow",{name:t.name,type:t.type,"default":t["default"]||""})},e.prototype._createParamList=function(t){var e;return App.Templates.getHTML("editUMLClassParamList",{parameters:function(){var n,s,i,a;for(i=t.parameters||[],a=[],n=0,s=i.length;s>n;n++)e=i[n],a.push(App.Templates.getHTML("editUMLClassParamRow",e));return a}()})},e.prototype._createFormRow=function(t,e){var n,s,i,a;return null==e&&(e=!0),a=this,n=("id_"+this.model.name._idSafe()+"_"+t.name._idSafe())._idUnique(),e?i={"default":t["default"]||"",checked:null!=t["default"]?"":"checked"}:s={list:this._createParamList(t)},App.Templates.get("editUMLClassFormRow",{id:n,name:t.name,type:t.type,"default":t["default"]||"",isAttribute:e,select:{"public":"public"===t.visibility?"selected":"","private":"private"===t.visibility?"selected":"","protected":"protected"===t.visibility?"selected":"","package":"package"===t.visibility?"selected":""},paramValue:i,paramList:s},n,t)},e.prototype.draw=function(){var t,e,n,s,i,a,r,o,l;for(this.div.find(".modal-title .className").text(this.model.name),this.div.find(".general .abstractCheckbox").prop("checked",this.model.isAbstract),this.div.find(".general .interfaceCheckbox").prop("checked",this.model.isInterface),e=this.div.find(".modal-body .attributes form").empty(),o=this.model.attributes,n=0,i=o.length;i>n;n++)t=o[n],e.append(this._createFormRow(t,!0));for(e=this.div.find(".modal-body .methods form").empty(),l=this.model.methods,s=0,a=l.length;a>s;s++)r=l[s],e.append(this._createFormRow(r,!1));return this},e.prototype.redraw=function(){return this.draw()},e.prototype.show=function(){return this.div.modal("show"),this},e.prototype.hide=function(){return this.div.modal("hide"),this},e}(App.AbstractView),App.Model=function(t){function e(t,n,s,i,a){null==a&&(a={}),e.__super__.constructor.call(this,t,n,s,i,a),this.type="model"}return s(e,t),e}(App.UMLClass),App.View=function(t){function e(t,n,s,i,a){null==a&&(a={}),e.__super__.constructor.call(this,t,n,s,i,a),this.type="view"}return s(e,t),e}(App.UMLClass),App.Controller=function(t){function e(t,n,s,i,a){null==a&&(a={}),e.__super__.constructor.call(this,t,n,s,i,a),this.type="controller"}return s(e,t),e}(App.UMLClass),App.UMLMultiplicity=function(){function t(t,e){null==t&&(t=1/0),null==e&&(e=1/0),this.min=t,this.max=e}return t.fromJSON=function(t){return new this(parseFloat(t.min),parseFloat(t.max))},t.prototype.valToStr=function(t){return t===1/0?"*":""+t},t.prototype.toString=function(){return this.min!==this.max?this.valToStr(this.min)+".."+this.valToStr(this.max):""+this.valToStr(this.min)},t.prototype.serialize=function(){return{min:""+this.min,max:""+this.max}},t}(),App.Connections.UMLConnection=function(){function t(t,e,n,s){this.source=t,this.target=e,this.type=this.constructor.name,this.multiplicities={source:n||new App.UMLMultiplicity,target:s||new App.UMLMultiplicity}}return t.fromJSON=function(t){return new App.Connections[t.type](t.source,t.target,App.UMLMultiplicity.fromJSON(t.multiplicities.source),App.UMLMultiplicity.fromJSON(t.multiplicities.target))},t.getArrowhead=function(){throw new Error("Implment me!")},t.prototype.getId=function(){return this.type+"-"+this.source+"-"+this.target},t.prototype.serialize=function(){return{source:this.source,target:this.target,type:this.type,multiplicities:{source:this.multiplicities.source.serialize(),target:this.multiplicities.target.serialize()}}},t}(),App.Connections.Generalization=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.getArrowhead=function(){return function(t,e,n,s){var i,a;return i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 15").attr("refX",11).attr("refY",7.5).attr("markerUnits","strokeWidth").attr("markerWidth",12).attr("markerHeight",15).attr("orient","auto"),a=i.append("path").attr("d","M 0 0 L 10 7.5 L 0 15 z").style("stroke-width",1).style("fill","#fff").style("stroke","#000"),dagreD3.util.applyStyle(a,n[s+"Style"]),t}},e}(App.Connections.UMLConnection),App.Connections.Realization=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.getArrowhead=function(){return function(t,e,n,s){var i,a;return i=t.append("marker").attr("id",e).attr("viewBox","0 0 10 15").attr("refX",11).attr("refY",7.5).attr("markerUnits","strokeWidth").attr("markerWidth",12).attr("markerHeight",15).attr("orient","auto"),a=i.append("path").attr("d","M 0 0 L 10 7.5 L 0 15 z").style("stroke-width",1).style("fill","#fff").style("stroke","#000"),d3.select(n.elem).select("path").style("stroke-dasharray","5, 5"),dagreD3.util.applyStyle(a,n[s+"Style"]),t}},e}(App.Connections.UMLConnection),App.Connections.Aggregation=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.getArrowhead=function(){return function(t,e,n,s){var i,a;return i=t.append("marker").attr("id",e).attr("viewBox","0 0 20 15").attr("refX",21).attr("refY",7.5).attr("markerUnits","strokeWidth").attr("markerWidth",12).attr("markerHeight",15).attr("orient","auto"),a=i.append("path").attr("d","M 10 0 L 20 7.5 L 10 15 L 0 7.5 z").style("stroke-width",1).style("fill","#fff").style("stroke","#000"),dagreD3.util.applyStyle(a,n[s+"Style"]),t}},e}(App.Connections.UMLConnection),App.Connections.Association=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.getArrowhead=function(){return function(t,e,n,s){}},e}(App.Connections.UMLConnection),App.Connections.Composition=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.getArrowhead=function(){return function(t,e,n,s){var i,a;return i=t.append("marker").attr("id",e).attr("viewBox","0 0 20 15").attr("refX",21).attr("refY",7.5).attr("markerUnits","strokeWidth").attr("markerWidth",12).attr("markerHeight",15).attr("orient","auto"),a=i.append("path").attr("d","M 10 0 L 20 7.5 L 10 15 L 0 7.5 z").style("stroke-width",1).style("fill","#000").style("stroke","#000"),dagreD3.util.applyStyle(a,n[s+"Style"]),t}},e}(App.Connections.UMLConnection)}).call(this);